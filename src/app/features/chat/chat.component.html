<div class="chat-wrapper">
  <!-- Lifecycle status banner pinned to top -->
  @if (lifecycleStatus(); as status) {
    <div class="lifecycle-banner">
      <span class="lifecycle-spinner"></span>
      <span class="lifecycle-text">{{ status }}</span>
    </div>
  }

  <!-- Todo banner pinned to top -->
  @if (todoItems().length > 0) {
    <app-todo-banner [items]="todoItems()" />
  }

  <!-- Message list -->
  <app-message-list 
    [messages]="messages()"
    [streamingMessage]="streamingMessage()"
    [latestThinking]="latestThinking()"
    [agentName]="agent().name"
    [agentIcon]="agent().icon"
  />

  <!-- Chat input -->
  <app-chat-input
    [agentName]="agent().name"
    [isLoading]="isLoading()"
    [disabled]="isInitializing() || !agent().session || agent().session?.status !== 'ready'"
    (messageSent)="onSendMessage($event)"
    (stopRequested)="onStopProcessing()"
  />
</div>
